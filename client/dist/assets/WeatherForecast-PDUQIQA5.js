import{r as h,j as e,u as $}from"./index-CldepO61.js";import{m as E,R as P,g as K,P as Z}from"./ElevationProfile-DQXevQii.js";import{f as J}from"./index-C1hE1Gfb.js";E.accessToken="pk.eyJ1IjoicHVuY2hpbmdtYW4iLCJhIjoiY2p1cjcyMmh2M3NpZDQ5bnEwMDV6ZTE1OSJ9.ef8y6l9fsKFMX91m_Rt2ng";const q={gold:{stages:1},silver:{stages:2},bronze:{stages:3}};function H(t,n,i,a){const w=(i-t)*Math.PI/180,d=(a-n)*Math.PI/180,o=Math.sin(w/2)*Math.sin(w/2)+Math.cos(t*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(d/2)*Math.sin(d/2);return 6371e3*2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}function V(t,n){const i=t[0]*Math.PI/180,a=t[1]*Math.PI/180,s=n[0]*Math.PI/180,d=n[1]*Math.PI/180-a,o=Math.sin(d)*Math.cos(s),r=Math.cos(i)*Math.sin(s)-Math.sin(i)*Math.cos(s)*Math.cos(d);return(Math.atan2(o,r)*180/Math.PI+360)%360}function le({route:t,tourType:n="gold",selectedStage:i,onPositionChange:a,onPoiClick:s,isFullscreen:w=!1,highlightPosition:d}){const o=h.useRef(null),r=h.useRef(null),j=h.useRef([]),L=h.useRef([]),f=h.useRef(null),k=h.useRef(null),T=h.useRef([]),[S,U]=h.useState(!1),g=h.useCallback((l,v)=>{const m=[v.startPoint,...v.waypoints,v.endPoint];let M=1/0,y=0;for(let p=0;p<m.length-1;p++){const I=H(l[1],l[0],m[p][1],m[p][0]);I<M&&(M=I,y=p)}let C=0;for(let p=0;p<y;p++)C+=H(m[p][1],m[p][0],m[p+1][1],m[p+1][0]);return{distance:C/1e3,index:y}},[]),N=h.useCallback(()=>{if(!r.current||r.current.hasImage("route-arrow"))return;const l=new Image(24,24);l.onload=()=>{r.current&&!r.current.hasImage("route-arrow")&&r.current.addImage("route-arrow",l,{sdf:!0})},l.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`
      <svg id="route-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28">
        <polygon points="14 1 1 27 14 22 27 27 14 1" fill="#fff" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
      </svg>
    `)},[]),z=h.useCallback(l=>{if(!r.current)return;const v=r.current.getZoom(),M=800*Math.pow(2.2,14-v),y=Math.max(Math.min(M,5e3),150),C=Math.max(30,100-v*5),p=[];let I=0,_=null;for(let D=1;D<l.length-1;D++){const F=l[D-1],R=l[D],O=l[D+1],B=H(F[1],F[0],R[1],R[0]);if(I+=B,I>=y){const c=V([R[1],R[0]],[O[1],O[0]]);H(R[1],R[0],O[1],O[0])>C&&(!_||H(_[1],_[0],R[1],R[0])>y/2)&&(p.push({type:"Feature",geometry:{type:"Point",coordinates:R},properties:{bearing:c}}),I=0,_=R)}}r.current.getLayer("routeArrows")&&r.current.removeLayer("routeArrows"),r.current.getSource("arrow-source")&&r.current.removeSource("arrow-source"),r.current.addSource("arrow-source",{type:"geojson",data:{type:"FeatureCollection",features:p}});const W=Math.max(.12,Math.min(.3,.12+(v-8)*.02));r.current.addLayer({id:"routeArrows",type:"symbol",source:"arrow-source",layout:{"icon-image":"route-arrow","icon-size":W,"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-rotate":["get","bearing"],"icon-rotation-alignment":"map","icon-offset":[0,0]},paint:{"icon-opacity":1,"icon-color":"#FFFFFF"}})},[]);h.useEffect(()=>{if(!(!o.current||r.current))return r.current=new E.Map({container:o.current,style:"mapbox://styles/sirajmuneer/cmjh1h0wb000b01se721kbl7m",center:[10.57,51.92],zoom:10,pitch:45,bearing:20,attributionControl:!1}),r.current.addControl(new E.NavigationControl,"top-right"),r.current.addControl(new E.ScaleControl,"bottom-left"),r.current.on("load",()=>{N(),U(!0)}),()=>{var l;(l=r.current)==null||l.remove(),r.current=null}},[N]);const G=h.useCallback((l,v)=>{const m=[],M=Math.ceil(l.length/v);for(let y=0;y<v;y++){const C=y*M,p=Math.min((y+1)*M+1,l.length);m.push(l.slice(C,p))}return m},[]);return h.useEffect(()=>{if(!r.current||!S||!t)return;const l=q[n];j.current.forEach(c=>c.remove()),j.current=[],L.current.forEach(c=>c.remove()),L.current=[],(r.current.getStyle().layers||[]).forEach(c=>{(c.id.startsWith("route-stage-")||c.id.startsWith("route-outline-stage-")||c.id==="route-hover"||c.id==="routeArrows")&&r.current.removeLayer(c.id)});for(let c=0;c<3;c++)r.current.getSource(`route-stage-${c}`)&&r.current.removeSource(`route-stage-${c}`);r.current.getSource("route-hover-source")&&r.current.removeSource("route-hover-source"),r.current.getSource("arrow-source")&&r.current.removeSource("arrow-source");let m;t.routeGeometry&&t.routeGeometry.length>0?(m=t.routeGeometry,console.log("[Map] Using stored routeGeometry:",m.length,"points")):(m=[t.startPoint,...t.waypoints,t.endPoint],console.log("[Map] No routeGeometry, using waypoints:",m.length,"points")),T.current=m;const M=G(m,l.stages);if(M.forEach((c,x)=>{const u=`route-stage-${x}`,A=`route-outline-stage-${x}`,b=`route-stage-${x}`;r.current.addSource(u,{type:"geojson",lineMetrics:!0,data:{type:"Feature",properties:{stage:x+1},geometry:{type:"LineString",coordinates:c}}}),r.current.addLayer({id:A,type:"line",source:u,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":P.SHADOW.COLOR,"line-opacity":P.SHADOW.OPACITY,"line-width":P.MAIN.WIDTH+2,"line-blur":P.SHADOW.BLUR,"line-translate":[P.SHADOW.OFFSET_X,P.SHADOW.OFFSET_Y]}});const Y=K(x);r.current.addLayer({id:b,type:"line",source:u,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":Y,"line-width":P.MAIN.WIDTH}})}),M.length>1){const c=[];M.forEach((x,u)=>{u>0&&c.push({coordinates:x[0],stageNumber:u+1,color:K(u)})}),c.forEach(({coordinates:x,stageNumber:u,color:A})=>{const b=document.createElement("div");b.className="stage-marker",b.style.cssText=`
          width: 24px;
          height: 24px;
          background: ${A};
          border: 2px solid #ffffff;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 11px;
          font-weight: 700;
          color: #ffffff;
          box-shadow: 0 2px 6px rgba(0,0,0,0.3);
          cursor: default;
        `,b.textContent=String(u);const Y=new E.Marker({element:b,anchor:"center"}).setLngLat(x).addTo(r.current);L.current.push(Y)})}r.current.addSource("route-hover-source",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:m}}}),r.current.addLayer({id:"route-hover",type:"line",source:"route-hover-source",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"transparent","line-width":20}}),r.current.hasImage("route-arrow")&&z(m);const y=c=>{if(!t||!a)return;const x=[c.lngLat.lng,c.lngLat.lat],{distance:u,index:A}=g(x,t);if(f.current)f.current.setLngLat(x);else{const b=document.createElement("div");b.className="hover-marker",b.style.cssText=`
          width: 20px; height: 20px; 
          background-color: #0b1215;
          border-radius: 50%;
          border: 2px solid white;
          box-shadow: 0 0 5px rgba(46, 46, 46, 0.5);
          pointer-events: none;
        `,f.current=new E.Marker({element:b}).setLngLat(x).addTo(r.current)}r.current.getCanvas().style.cursor="pointer",a({lng:x[0],lat:x[1],distance:u,index:A})},C=()=>{f.current&&(f.current.remove(),f.current=null),r.current.getCanvas().style.cursor=""};r.current.on("mousemove","route-hover",y),r.current.on("mouseleave","route-hover",C);const p=()=>{var c;T.current.length>0&&((c=r.current)!=null&&c.hasImage("route-arrow"))&&z(T.current)};r.current.on("zoomend",p);const I=document.createElement("div");I.className="marker start-marker",I.innerHTML=`
      <div style="
        background: #0b1215;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid #e0e0e0;
        box-shadow: 0 2px 8px rgba(8, 141, 149, 0.2);
        cursor: pointer;
        padding-left: 2px;
      ">
        <i class="fa-solid fa-play" style="font-size: 14px; color: #fff;"></i>
      </div>
    `;const _=new E.Marker({element:I}).setLngLat(t.startPoint).addTo(r.current);j.current.push(_);const W=document.createElement("div");W.className="marker end-marker",W.innerHTML=`
      <div style="
        background: #0b1215;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid #e0e0e0;
        box-shadow: 0 2px 8px rgba(8, 141, 149, 0.2);
        cursor: pointer;
      ">
        <i class="fa-solid fa-flag-checkered" style="font-size: 14px; color: #fff;"></i>
      </div>
    `;const D=new E.Marker({element:W}).setLngLat(t.endPoint).addTo(r.current);j.current.push(D),t.pois&&t.pois.length>0&&t.pois.forEach(c=>{const x=Z[c.type||"highlight"]||Z.highlight,u=document.createElement("div"),A=36;u.className="poi-marker",u.style.width=`${A}px`,u.style.height=`${A}px`,u.style.backgroundColor=x.bg,u.style.border="3px solid white",u.style.borderRadius="50%",u.style.display="flex",u.style.alignItems="center",u.style.justifyContent="center",u.style.boxShadow="0 2px 8px rgba(0,0,0,0.3)",u.style.cursor="pointer",u.style.padding="0",u.tabIndex=0;const b=document.createElement("i");b.className=`fas ${x.icon}`,b.style.color="white",b.style.fontSize="14px",b.style.pointerEvents="none",u.appendChild(b),u.addEventListener("click",()=>{s==null||s(c)}),new E.Marker(u).setLngLat(c.lngLat).addTo(r.current)});const F=[...m];t.pois&&t.pois.forEach(c=>F.push(c.lngLat));const R=F.reduce((c,x)=>c.extend(x),new E.LngLatBounds(F[0],F[0])),B=window.innerWidth<768?{top:50,bottom:50,left:20,right:20}:{top:50,bottom:50,left:50,right:50};return r.current.fitBounds(R,{padding:B,maxZoom:15,pitch:45,bearing:20,duration:1500}),()=>{r.current&&(r.current.off("mousemove","route-hover",y),r.current.off("mouseleave","route-hover",C),r.current.off("zoomend",p))}},[t,n,S,s,a,g,G,z]),h.useEffect(()=>{if(!(!r.current||!S))if(d)if(k.current)k.current.setLngLat([d.lng,d.lat]);else{const l=document.createElement("div");l.className="highlight-marker",l.style.cssText=`
          width: 16px; height: 16px;
          background-color: #088D95;
          border-radius: 50%;
          border: 3px solid white;
          box-shadow: 0 0 8px rgba(8, 141, 149, 0.6);
          pointer-events: none;
        `,k.current=new E.Marker({element:l}).setLngLat([d.lng,d.lat]).addTo(r.current)}else k.current&&(k.current.remove(),k.current=null)},[d,S]),h.useEffect(()=>()=>{var l,v;(l=f.current)==null||l.remove(),(v=k.current)==null||v.remove()},[]),h.useEffect(()=>{if(!r.current||!S||!t||i===null||i===void 0)return;const l=q[n];if(l.stages<=1||i<1||i>l.stages)return;let v;t.routeGeometry&&t.routeGeometry.length>0?v=t.routeGeometry:v=[t.startPoint,...t.waypoints,t.endPoint];const m=G(v,l.stages),M=i-1;if(!m[M]||m[M].length===0)return;const y=m[M],C=y.reduce((p,I)=>p.extend(I),new E.LngLatBounds(y[0],y[0]));r.current.fitBounds(C,{padding:{top:80,bottom:120,left:60,right:60},maxZoom:14,pitch:50,bearing:10+i*15,duration:2e3,essential:!0}),console.log(`[Map] Zooming to Stage ${i}`,{stageCoords:y.length,bounds:C.toArray()})},[i,n,t,S,G]),e.jsx("div",{ref:o,className:`w-full ${w?"h-screen fixed inset-0 z-[999]":"h-full min-h-[100%] relative"}`})}function Q(t,n){const[a,s]=t,[w,d]=n,o=(d-s)*Math.PI/180,r=(w-a)*Math.PI/180,j=Math.sin(o/2)*Math.sin(o/2)+Math.cos(s*Math.PI/180)*Math.cos(d*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j)))}function de({poi:t,routeStartPoint:n,onClose:i}){const{t:a}=$(),[s,w]=h.useState(0),[d,o]=h.useState("overview");if(!t)return null;const r=t.images&&t.images.length>0,j=t.images&&t.images.length>1,L=()=>{t.images&&w(g=>(g+1)%t.images.length)},f=()=>{t.images&&w(g=>(g-1+t.images.length)%t.images.length)},k=g=>{w(g)},T=g=>a({morning:"morning",noon:"noon",afternoon:"afternoon",evening:"evening",allday:"allday"}[g]||g),S=g=>({food:"fa-utensils",wc:"fa-restroom",charging:"fa-charging-station",difficulty:"fa-mountain",parking:"fa-parking",water:"fa-droplet",shelter:"fa-house",viewpoint:"fa-binoculars",camping:"fa-campground",wifi:"fa-wifi",shower:"fa-shower"})[g.toLowerCase()]||"fa-circle",U=g=>a({food:"food",wc:"toilet",charging:"chargingStation",difficulty:"difficulty",parking:"parking",water:"waterSource",shelter:"shelter",viewpoint:"viewpoint",camping:"camping",wifi:"wifi",shower:"shower"}[g.toLowerCase()]||g);return e.jsx("div",{className:`poi-sidebar ${t?"visible":""}`,children:e.jsxs("div",{className:"poi-content",children:[e.jsxs("div",{className:"poi-hero",children:[e.jsx("button",{className:"close-button",onClick:i,children:e.jsx("i",{className:"fas fa-times"})}),e.jsxs("div",{className:"image-carousel",children:[e.jsx("div",{className:"carousel-container",children:r?t.images.map((g,N)=>e.jsx("img",{src:g,alt:t.name,className:"carousel-image",style:{display:N===s?"block":"none"},"data-index":N,onError:z=>{z.currentTarget.src="/api/placeholder/400/320"}},N)):e.jsx("div",{className:"carousel-placeholder",children:e.jsx("i",{className:"fas fa-mountain"})})}),j&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"carousel-button prev",onClick:f,children:"‚ùÆ"}),e.jsx("button",{className:"carousel-button next",onClick:L,children:"‚ùØ"}),e.jsx("div",{className:"carousel-dots",children:t.images.map((g,N)=>e.jsx("span",{className:`dot ${N===s?"active":""}`,onClick:()=>k(N)},N))})]})]}),e.jsx("div",{className:"poi-hero-overlay",children:e.jsx("h1",{className:"poi-hero-title",children:t.name})})]}),e.jsxs("div",{className:"poi-category-nav",children:[e.jsxs("div",{className:"category-buttons",children:[e.jsxs("button",{className:`category-btn ${d==="overview"?"active":""}`,"data-category":"overview",onClick:()=>o("overview"),children:[e.jsx("i",{className:"fas fa-info-circle"}),e.jsx("span",{children:a("overview")})]}),e.jsxs("button",{className:`category-btn ${d==="facilities"?"active":""}`,"data-category":"facilities",onClick:()=>o("facilities"),children:[e.jsx("i",{className:"fas fa-wrench"}),e.jsx("span",{children:a("facilitiesAndService")})]}),e.jsxs("button",{className:`category-btn ${d==="location"?"active":""}`,"data-category":"location",onClick:()=>o("location"),children:[e.jsx("i",{className:"fas fa-map-pin"}),e.jsx("span",{children:a("location")})]})]}),e.jsxs("div",{className:"category-content",children:[e.jsxs("div",{className:`category-panel ${d==="overview"?"active":""}`,id:"overview-panel",children:[e.jsx("p",{className:"poi-description",children:t.description||a("noDescriptionAvailable")}),t.best_time&&e.jsx("div",{className:"poi-additional-info",children:e.jsxs("div",{className:"poi-info-item",children:[e.jsx("i",{className:"fas fa-clock"}),e.jsxs("span",{children:[a("bestVisitTime"),": ",T(t.best_time)]})]})})]}),e.jsx("div",{className:`category-panel ${d==="facilities"?"active":""}`,id:"facilities-panel",children:t.amenities&&t.amenities.length>0?e.jsx("div",{className:"poi-amenities-grid",children:t.amenities.map((g,N)=>e.jsxs("div",{className:"poi-amenity-item",children:[e.jsx("i",{className:`fas ${S(g)}`}),e.jsx("span",{children:U(g)})]},N))}):e.jsx("p",{className:"no-facilities",children:a("noFacilitiesAvailable")})}),e.jsxs("div",{className:`category-panel ${d==="location"?"active":""}`,id:"location-panel",children:[e.jsxs("div",{className:"location-coordinates",children:[e.jsx("i",{className:"fas fa-map-marker-alt"}),e.jsxs("span",{children:[a("coordinates"),":"," ",parseFloat(String(t.lngLat[0])).toFixed(2),","," ",parseFloat(String(t.lngLat[1])).toFixed(2)]})]}),e.jsx("div",{className:"route-distance-info",children:e.jsxs("p",{children:[e.jsx("i",{className:"fas fa-route"}),a("distanceToRoute"),":"," ",n?parseFloat(String(Q(n,t.lngLat))).toFixed(1):"0.0"," ","km"]})})]})]})]})]})})}function ue({isOpen:t,onClose:n,featureName:i="GPX Download"}){const{t:a}=$();return t?e.jsx("div",{className:"premium-modal-overlay",onClick:n,children:e.jsxs("div",{className:"premium-modal",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{className:"premium-modal-close",onClick:n,children:e.jsx("i",{className:"fas fa-times"})}),e.jsx("div",{className:"premium-icon",children:e.jsx("i",{className:"fas fa-crown"})}),e.jsx("h2",{className:"premium-title",children:a("premiumFeature","Premium Feature")}),e.jsx("p",{className:"premium-feature-name",children:i}),e.jsx("p",{className:"premium-description",children:a("premiumDescription","This feature requires a premium subscription to access. Upgrade your account to unlock all features including GPX downloads, offline maps, and more.")}),e.jsxs("div",{className:"premium-benefits",children:[e.jsxs("div",{className:"benefit-item",children:[e.jsx("i",{className:"fas fa-download"}),e.jsx("span",{children:a("benefitGpx","GPX Route Downloads")})]}),e.jsxs("div",{className:"benefit-item",children:[e.jsx("i",{className:"fas fa-map"}),e.jsx("span",{children:a("benefitOffline","Offline Map Access")})]}),e.jsxs("div",{className:"benefit-item",children:[e.jsx("i",{className:"fas fa-route"}),e.jsx("span",{children:a("benefitRoutes","Unlimited Route Storage")})]}),e.jsxs("div",{className:"benefit-item",children:[e.jsx("i",{className:"fas fa-star"}),e.jsx("span",{children:a("benefitPriority","Priority Support")})]})]}),e.jsxs("div",{className:"premium-actions",children:[e.jsxs("button",{className:"premium-btn primary",children:[e.jsx("i",{className:"fas fa-crown"}),a("upgradePremium","Upgrade to Premium")]}),e.jsx("button",{className:"premium-btn secondary",onClick:n,children:a("maybeLater","Maybe Later")})]}),e.jsxs("p",{className:"premium-login",children:[a("alreadyPremium","Already have premium?")," ",e.jsx("a",{href:"/login",className:"login-link",children:a("loginHere","Login here")})]})]})}):null}function ee({lat:t,lng:n,compact:i=!1}){const{i18n:a}=$(),[s,w]=h.useState(null),[d,o]=h.useState(!0);return h.useEffect(()=>{const r=async()=>{try{const f=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${n}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m`)).json();if(f.current){const k=te(f.current.weather_code);w({temperature:Math.round(f.current.temperature_2m),condition:re(f.current.weather_code,a.language),conditionKey:k,icon:ae(f.current.weather_code),humidity:f.current.relative_humidity_2m,wind:Math.round(f.current.wind_speed_10m)})}}catch(L){console.error("Failed to fetch weather:",L)}finally{o(!1)}};r();const j=setInterval(r,1800*1e3);return()=>clearInterval(j)},[t,n,a.language]),d?e.jsx("div",{className:`flex items-center justify-center ${i?"p-2":"p-4"} bg-[#080e11] border border-[#1e2a33] rounded-lg text-gray-400`,children:e.jsx("i",{className:"fas fa-spinner fa-spin text-[#088d95]"})}):s?i?e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-[#080e11] border border-[#1e2a33] rounded-lg",children:[e.jsx("i",{className:`fas fa-${s.icon} text-[#088d95]`}),e.jsxs("span",{className:"text-white font-semibold",children:[s.temperature,"¬∞C"]}),e.jsx("span",{className:"text-gray-400 text-sm hidden sm:inline",children:s.condition})]}):e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-[#080e11] border border-[#1e2a33] rounded-lg",children:[e.jsx("div",{className:"text-2xl text-[#088d95]",children:e.jsx("i",{className:`fas fa-${s.icon}`})}),e.jsxs("div",{className:"text-2xl font-semibold text-white",children:[s.temperature,"¬∞C"]}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"text-sm text-gray-400",children:s.condition}),e.jsxs("div",{className:"flex gap-3 text-xs text-gray-500",children:[e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-droplet text-[#088d95] mr-1"}),s.humidity,"%"]}),e.jsxs("span",{children:[e.jsx("i",{className:"fas fa-wind text-[#088d95] mr-1"}),s.wind," km/h"]})]})]})]}):null}function te(t){return{0:"weatherClear",1:"weatherMostlyClear",2:"weatherPartlyCloudy",3:"weatherCloudy",45:"weatherFog",48:"weatherFogRime",51:"weatherLightDrizzle",53:"weatherModerateDrizzle",55:"weatherHeavyDrizzle",61:"weatherLightRain",63:"weatherModerateRain",65:"weatherHeavyRain",71:"weatherLightSnow",73:"weatherModerateSnow",75:"weatherHeavySnow",80:"weatherRainShowers",81:"weatherModerateRainShowers",82:"weatherHeavyRainShowers",95:"weatherThunderstorm",96:"weatherThunderstormHail"}[t]||"weatherUnknown"}function re(t,n){const i={de:{0:"Klar",1:"√úberwiegend klar",2:"Teilweise bew√∂lkt",3:"Bew√∂lkt",45:"Nebel",48:"Nebel mit Reif",51:"Leichter Niesel",53:"M√§√üiger Niesel",55:"Starker Niesel",61:"Leichter Regen",63:"M√§√üiger Regen",65:"Starker Regen",71:"Leichter Schnee",73:"M√§√üiger Schnee",75:"Starker Schnee",80:"Regenschauer",81:"M√§√üige Regenschauer",82:"Starke Regenschauer",95:"Gewitter",96:"Gewitter mit Hagel"},en:{0:"Clear",1:"Mostly Clear",2:"Partly Cloudy",3:"Cloudy",45:"Fog",48:"Rime Fog",51:"Light Drizzle",53:"Moderate Drizzle",55:"Heavy Drizzle",61:"Light Rain",63:"Moderate Rain",65:"Heavy Rain",71:"Light Snow",73:"Moderate Snow",75:"Heavy Snow",80:"Rain Showers",81:"Moderate Rain Showers",82:"Heavy Rain Showers",95:"Thunderstorm",96:"Thunderstorm with Hail"}};return(i[n]||i.de)[t]||(n==="en"?"Unknown":"Unbekannt")}function ae(t){return t===0?"sun":t<=3?"cloud-sun":t<=48?"smog":t<=55?"cloud-rain":t<=65?"cloud-showers-heavy":t<=75?"snowflake":t<=82?"cloud-rain":"cloud-bolt"}function me({route:t,showWeather:n=!0,showDownloadButton:i=!1,onDownloadClick:a}){const{t:s}=$(),w=(t.startPoint[1]+t.endPoint[1])/2,d=(t.startPoint[0]+t.endPoint[0])/2;return e.jsxs("div",{className:"route-stats-bar",id:"route-stats-bar",children:[e.jsx("div",{className:"stats-left",children:e.jsx("h1",{className:"route-title",id:"routeTitle",children:t.name})}),e.jsxs("div",{className:"stats-center",children:[e.jsxs("div",{className:"stat-item",title:s("distance"),children:[e.jsx("i",{className:"fas fa-route"}),e.jsxs("span",{children:[parseFloat(String(t.distance||0)).toFixed(1)," km"]})]}),e.jsxs("div",{className:"stat-item",title:s("duration"),children:[e.jsx("i",{className:"fas fa-clock"}),e.jsx("span",{children:J(Number(t.duration)||0)})]}),e.jsxs("div",{className:"stat-item",title:s("totalAscent"),children:[e.jsx("i",{className:"fas fa-arrow-up"}),e.jsxs("span",{children:[Math.round(parseFloat(String(t.totalAscent||0)))," m"]})]}),e.jsxs("div",{className:"stat-item",title:s("lowestPoint"),children:[e.jsx("i",{className:"fas fa-arrow-down"}),e.jsxs("span",{children:[Math.round(parseFloat(String(t.lowestPoint||0)))," m"]})]}),e.jsxs("div",{className:"stat-item",title:s("highestPoint"),children:[e.jsx("i",{className:"fas fa-mountain"}),e.jsxs("span",{children:[Math.round(parseFloat(String(t.highestPoint||0)))," m"]})]})]}),e.jsxs("div",{className:"stats-right",children:[n&&e.jsx("div",{className:"weather-container",children:e.jsx(ee,{lat:w,lng:d,compact:!0})}),i&&a&&e.jsxs("button",{className:"download-btn",onClick:a,children:[e.jsx("i",{className:"fas fa-download"}),e.jsx("span",{className:"download-text",children:s("downloadGPX")})]}),e.jsx("a",{href:"https://mountainsquad.com/",target:"_blank",rel:"noopener noreferrer",className:"logo-link",children:e.jsx("img",{src:"/images/small-logo.png",alt:"Mountain Squad",className:"ms-logo",onError:o=>{o.currentTarget.style.display="none"}})})]})]})}const X={gold:1,silver:2,bronze:3};function he({tourType:t,onTourTypeChange:n,selectedStage:i,onStageSelect:a}){const{t:s}=$(),w=o=>{n(o),a&&a(null)},d=o=>{a&&a(i===o?null:o)};return e.jsx("div",{className:"tour-selector-overlay",children:["gold","silver","bronze"].map(o=>e.jsxs("div",{className:"tour-group",children:[e.jsx("button",{onClick:()=>w(o),className:`tour-btn ${t===o?"active":""}`,"data-type":o,children:s(o)}),t===o&&X[o]>1&&e.jsx("div",{className:"stage-buttons",children:Array.from({length:X[o]},(r,j)=>j+1).map(r=>e.jsx("button",{onClick:()=>d(r),className:`stage-btn ${i===r?"active":""}`,title:`${s("stage")} ${r}`,children:r},r))})]},o))})}function fe({lat:t,lng:n,locationName:i="Wernigerode"}){const{i18n:a}=$(),[s,w]=h.useState([]),[d,o]=h.useState(!0);return h.useEffect(()=>{const r=async()=>{try{const f=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${n}&daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=Europe/Berlin`)).json();if(f.daily){const k=f.daily.time.slice(0,7).map((T,S)=>({date:T,dayName:se(T,S,a.language),weatherCode:f.daily.weather_code[S],tempMax:Math.round(f.daily.temperature_2m_max[S]),tempMin:Math.round(f.daily.temperature_2m_min[S]),icon:ne(f.daily.weather_code[S])}));w(k)}}catch(L){console.error("Failed to fetch weather forecast:",L)}finally{o(!1)}};r();const j=setInterval(r,1800*1e3);return()=>clearInterval(j)},[t,n,a.language]),d?e.jsx("div",{className:"weather-forecast-compact",children:e.jsx("div",{className:"flex items-center justify-center py-3 text-gray-400",children:e.jsx("i",{className:"fas fa-spinner fa-spin text-lg text-[#088d95]"})})}):s.length===0?null:e.jsx("div",{style:{background:"rgba(132, 192, 137, 0.85)",backdropFilter:"blur(10px)",borderRadius:"10px",border:"1px solid rgba(0,0,0,0.2)",padding:"12px 16px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"8px",textAlign:"center"},children:s.map(r=>e.jsxs("div",{style:{minWidth:"50px"},children:[e.jsx("div",{style:{fontSize:"10px",fontWeight:"600",color:"#000",textTransform:"uppercase",letterSpacing:"0.3px",marginBottom:"6px",whiteSpace:"nowrap"},children:r.dayName}),e.jsx("div",{style:{fontSize:"24px",marginBottom:"4px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center"},children:r.icon}),e.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:"#333"},children:[r.tempMax,"¬∞C"]})]},r.date))})})}function se(t,n,i){if(n===0)return i==="de"?"HEUTE":"TODAY";if(n===1)return i==="de"?"MORGEN":"TOMORROW";const a=new Date(t);return i==="de"?["SONNTAG","MONTAG","DIENSTAG","MITTWOCH","DONNERSTAG","FREITAG","SAMSTAG"][a.getDay()]:["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"][a.getDay()]}function ne(t){return t===0?"‚òÄÔ∏è":t<=3?"‚õÖ":t<=48?"üå´Ô∏è":t<=55||t<=65?"üåßÔ∏è":t<=75?"‚ùÑÔ∏è":t<=82?"üåßÔ∏è":t<=96?"‚õàÔ∏è":"‚òÅÔ∏è"}export{le as M,de as P,me as R,he as T,fe as W,ue as a};
