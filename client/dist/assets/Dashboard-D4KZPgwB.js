import{u as j,r as o,j as e,a as w}from"./index-CldepO61.js";import{a as b,r as p}from"./index-C1hE1Gfb.js";function k({routeId:s,routeName:n,onClose:x}){const{t:a}=j(),[r,h]=o.useState(null),c=window.location.origin,i={public:`${c}/route/${s}`,embedEN:`${c}/embed?route=${s}&lang=en`,embedDE:`${c}/embed?route=${s}&lang=de`,iframe:`<iframe src="${c}/embed?route=${s}" width="100%" height="600" frameborder="0" style="border-radius: 8px;"></iframe>`},d=async(m,f)=>{try{await navigator.clipboard.writeText(m),h(f),setTimeout(()=>h(null),2e3)}catch(u){console.error("Failed to copy:",u)}};return e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[1000] p-4",onClick:x,children:e.jsxs("div",{className:"bg-[#0b1215] border border-[#1e2a33] rounded-xl w-full max-w-lg shadow-2xl",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-[#1e2a33]",children:[e.jsxs("h3",{className:"flex items-center gap-3 text-lg font-semibold text-white",children:[e.jsx("i",{className:"fas fa-share-alt text-[#088d95]"}),a("shareRoute")]}),e.jsx("button",{onClick:x,className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-white hover:bg-[#1e2a33] rounded-lg transition-all",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"text-gray-400 text-sm",children:[a("route"),":"," ",e.jsx("span",{className:"text-white font-medium",children:n})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-2",children:[e.jsx("i",{className:"fas fa-link text-[#088d95]"}),a("publicLink")]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i.public,readOnly:!0,className:"flex-1 px-4 py-2.5 bg-[#080e11] border border-[#1e2a33] rounded-lg text-white text-sm focus:outline-none"}),e.jsx("button",{onClick:()=>d(i.public,"public"),className:`px-4 py-2.5 rounded-lg font-medium transition-all ${r==="public"?"bg-green-500 text-white":"bg-[#1e2a33] text-gray-300 hover:bg-[#2a3a47]"}`,children:r==="public"?e.jsx("i",{className:"fas fa-check"}):e.jsx("i",{className:"fas fa-copy"})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-2",children:[e.jsx("i",{className:"fas fa-external-link-alt text-[#088d95]"}),a("embedUrlEN")]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i.embedEN,readOnly:!0,className:"flex-1 px-4 py-2.5 bg-[#080e11] border border-[#1e2a33] rounded-lg text-white text-sm focus:outline-none"}),e.jsx("button",{onClick:()=>d(i.embedEN,"embedEN"),className:`px-4 py-2.5 rounded-lg font-medium transition-all ${r==="embedEN"?"bg-green-500 text-white":"bg-[#1e2a33] text-gray-300 hover:bg-[#2a3a47]"}`,children:r==="embedEN"?e.jsx("i",{className:"fas fa-check"}):e.jsx("i",{className:"fas fa-copy"})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-2",children:[e.jsx("i",{className:"fas fa-external-link-alt text-[#088d95]"}),a("embedUrlDE")]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i.embedDE,readOnly:!0,className:"flex-1 px-4 py-2.5 bg-[#080e11] border border-[#1e2a33] rounded-lg text-white text-sm focus:outline-none"}),e.jsx("button",{onClick:()=>d(i.embedDE,"embedDE"),className:`px-4 py-2.5 rounded-lg font-medium transition-all ${r==="embedDE"?"bg-green-500 text-white":"bg-[#1e2a33] text-gray-300 hover:bg-[#2a3a47]"}`,children:r==="embedDE"?e.jsx("i",{className:"fas fa-check"}):e.jsx("i",{className:"fas fa-copy"})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 mb-2",children:[e.jsx("i",{className:"fas fa-code text-[#088d95]"}),a("iframeEmbedCode")]}),e.jsx("textarea",{value:i.iframe,readOnly:!0,rows:3,className:"w-full px-4 py-2.5 bg-[#080e11] border border-[#1e2a33] rounded-lg text-white text-xs font-mono focus:outline-none resize-none"}),e.jsx("button",{onClick:()=>d(i.iframe,"iframe"),className:`w-full mt-2 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${r==="iframe"?"bg-green-500 text-white":"bg-[#088d95] hover:bg-[#0da6ae] text-white"}`,children:r==="iframe"?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check"})," ",a("copied")]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-copy"})," ",a("copyCode")]})})]}),e.jsxs("div",{className:"bg-[#088d95]/10 border border-[#088d95]/30 rounded-lg p-4",children:[e.jsxs("h4",{className:"flex items-center gap-2 text-[#088d95] font-medium mb-3",children:[e.jsx("i",{className:"fas fa-info-circle"}),a("shopifyEmbedding")]}),e.jsxs("ol",{className:"text-sm text-gray-400 space-y-1.5 list-decimal list-inside",children:[e.jsx("li",{children:a("shopifyStep1")}),e.jsx("li",{children:a("shopifyStep2")}),e.jsx("li",{children:a("shopifyStep3")}),e.jsx("li",{children:a("shopifyStep4")}),e.jsx("li",{children:a("shopifyStep5")})]})]})]})]})})}function S(){const{t:s}=j(),n=w(),[x,a]=o.useState([]),[r,h]=o.useState(!0),[c,i]=o.useState(!1),[d,m]=o.useState(""),[f,u]=o.useState(null);o.useEffect(()=>{(async()=>{try{(await b.getProfile()).success?i(!0):n("/admin/login")}catch{n("/admin/login")}})()},[n]),o.useEffect(()=>{if(!c)return;(async()=>{try{const l=await p.getAll();l.success&&a(l.data)}catch(l){console.error("Failed to load routes:",l)}finally{h(!1)}})()},[c]);const N=async t=>{if(confirm(s("confirmDelete")))try{(await p.delete(t)).success&&a(x.filter(v=>v.id!==t))}catch(l){console.error("Failed to delete route:",l)}},y=async()=>{await b.logout(),n("/admin/login")},g=x.filter(t=>{var l;return t.name.toLowerCase().includes(d.toLowerCase())||((l=t.description)==null?void 0:l.toLowerCase().includes(d.toLowerCase()))});return c?e.jsxs("div",{className:"flex h-screen bg-[#0b1215]",children:[e.jsxs("div",{className:"w-64 bg-[#080e11] mt-[30px] border-r border-[#1e2a33] p-5 flex flex-col",children:[e.jsx("div",{className:"mb-8",children:e.jsx("img",{src:"/images/ms-logo.png",alt:"Logo",className:"h-10 object-contain",onError:t=>{t.currentTarget.style.display="none"}})}),e.jsxs("nav",{className:"flex-1 space-y-2",children:[e.jsxs("a",{href:"/admin",className:"flex items-center gap-3 px-4 py-3 bg-[#088d95] text-[#0b1215] rounded-lg font-medium hover:bg-[#0da6ae] transition-all",children:[e.jsx("i",{className:"fas fa-map-marked-alt"}),s("routes")]}),e.jsxs("a",{href:"/admin/edit",className:"flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-[#1e2a33] rounded-lg transition-all",children:[e.jsx("i",{className:"fas fa-plus"}),s("createRoute")]})]}),e.jsxs("button",{onClick:y,className:"flex items-center justify-center gap-2 w-full px-4 py-3 text-gray-400 hover:text-white hover:bg-red-500/20 border border-[#1e2a33] rounded-lg transition-all",children:[e.jsx("i",{className:"fas fa-sign-out-alt"}),s("logout")]})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"h-16 bg-[#080e11] border-b border-[#1e2a33] flex items-center px-6",children:[e.jsxs("h2",{className:"flex items-center gap-3 text-xl font-semibold text-white",children:[e.jsx("i",{className:"fas fa-map-marked-alt text-[#088d95]"}),s("routeManagement")]}),e.jsx("div",{className:"ml-auto flex items-center gap-4",children:e.jsxs("span",{className:"text-gray-400 text-sm",children:[x.length," ",x.length===1?s("route"):s("routes")]})})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-auto",children:[e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("i",{className:"fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"search",placeholder:s("searchRoutes"),value:d,onChange:t=>m(t.target.value),className:"w-full pl-12 pr-4 py-3 bg-[#080e11] border border-[#1e2a33] rounded-lg text-white placeholder-gray-500 focus:border-[#088d95] focus:outline-none transition-all"})]}),e.jsxs("button",{onClick:()=>n("/admin/edit"),className:"flex items-center gap-2 px-6 py-3 bg-[#088d95] hover:bg-[#0da6ae] text-white font-medium rounded-lg transition-all",children:[e.jsx("i",{className:"fas fa-plus"}),s("createRoute")]})]}),r?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-[#088d95] mb-4"}),e.jsx("span",{children:s("loading")})]}):g.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[e.jsx("i",{className:"fas fa-route text-5xl mb-4 opacity-50"}),e.jsx("span",{className:"text-lg",children:s("noRoutes")}),e.jsxs("button",{onClick:()=>n("/admin/edit"),className:"mt-4 px-6 py-2 bg-[#088d95] hover:bg-[#0da6ae] text-white rounded-lg transition-all",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),s("createFirstRoute")]})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:g.map(t=>e.jsxs("div",{className:"bg-[#080e11] border border-[#1e2a33] rounded-xl p-5 hover:border-[#088d95]/50 transition-all group",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-white truncate group-hover:text-[#088d95] transition-colors",children:t.name}),t.description&&e.jsx("p",{className:"text-gray-400 text-sm mt-1 line-clamp-2",children:t.description})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4 p-3 bg-[#0b1215] rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:s("distance")}),e.jsxs("div",{className:"text-[#088d95] font-semibold",children:[parseFloat(String(t.distance||0)).toFixed(1)," km"]})]}),e.jsxs("div",{className:"text-center border-x border-[#1e2a33]",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:s("ascent")}),e.jsxs("div",{className:"text-green-500 font-semibold",children:["↑"," ",Math.round(parseFloat(String(t.totalAscent||0)))," ","m"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:s("descent")}),e.jsxs("div",{className:"text-red-400 font-semibold",children:["↓"," ",Math.round(parseFloat(String(t.totalDescent||0)))," ","m"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>window.open(`/route/${t.id}`,"_blank"),className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-[#1e2a33] hover:bg-[#2a3a47] text-gray-300 rounded-lg transition-all",title:s("view"),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{onClick:()=>u(t),className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-[#088d95] hover:bg-[#0da6ae] text-white rounded-lg transition-all",title:s("share"),children:e.jsx("i",{className:"fas fa-share-alt"})}),e.jsx("button",{onClick:()=>n(`/admin/edit/${t.id}`),className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-[#1e2a33] hover:bg-[#2a3a47] text-gray-300 rounded-lg transition-all",title:s("edit"),children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{onClick:()=>N(t.id),className:"flex items-center justify-center px-4 py-2.5 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg transition-all",title:s("delete"),children:e.jsx("i",{className:"fas fa-trash"})})]})]},t.id))})]})]}),f&&e.jsx(k,{routeId:f.id,routeName:f.name,onClose:()=>u(null)})]}):null}export{S as default};
